<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spotifyランキングトップ10</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        ul {
            list-style: none;
            padding: 0;
        }
        li {
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>Spotifyランキングトップ10</h1>
    <ul id="ranking"></ul>
    <script>
        // Spotify APIの情報
const clientId = '3b79e357c055448dbb4ca36e691ec946';
const clientSecret = 'e86e1f33502b414b9d2eaddafeeffd6d';

// トークンを取得する関数
async function getAccessToken() {
    const response = await fetch('https://accounts.spotify.com/api/token', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
            Authorization: 'Basic ' + btoa(clientId + ':' + clientSecret),
        },
        body: 'grant_type=client_credentials',
    });
    const data = await response.json();
    return data.access_token;
}

// トップ10トラックを取得する関数
async function getTopTracks(token) {
    const response = await fetch('https://api.spotify.com/v1/playlists/37i9dQZEVXbNG2KDcFcKOF', {
        headers: {
            Authorization: `Bearer ${token}`,
        },
    });
    const data = await response.json();
    return data.tracks.items.slice(0, 10); // トップ10トラックを取得
}

// HTMLにランキングを表示
async function displayTopTracks() {
    const token = await getAccessToken();
    const tracks = await getTopTracks(token);
    const rankingElement = document.getElementById('ranking');

    tracks.forEach((track, index) => {
        const li = document.createElement('li');
        li.textContent = `${index + 1}. ${track.track.name} by ${track.track.artists.map(artist => artist.name).join(', ')}`;
        rankingElement.appendChild(li);
    });
}

// ページ読み込み時にランキングを表示
displayTopTracks();

    </script>
</body>
</html>

